<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.springframework.org/schema/security">

<head>
  <meta charset="utf-8">
  <title>admin</title>
</head>

<body>
  <h1>管理者ページ </h1>

  <p>
    <a href="/logout">ログアウト</a>
  </p>

  <p>
    <a href="/keiji">掲示板に戻る</a>
  </p>

  <tbody sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_MASTER')">
    <p th:if="${comment}">
      コメント一覧
    <table border="1">
      <thead>
        <th>コミット番号</th>
        <th>ユーザー名</th>
        <th>コメント内容</th>
        <th>日時</th>
        <th>いいね数</th>
        <th>処理</th>
      </thead>
      <tr th:each="comment,stat:${comment}">
        <td>[[${comment.number}]]</td>
        <td>[[${comment.user}]]</td>
        <td>[[${comment.userComment}]]</td>
        <td>[[${comment.date}]]</td>
        <td>[[${comment.good}]]</td>
        <td>
          <form action="/admin/delete" method="post">
            <input type="hidden" name="number" th:value="${comment.number}" />
            <input type="submit" value="削除">
          </form>
        </td>
      <tr>
    </table>
    </p>

    <p th:if="${deleteComment}">
    <div th:each="comment,stat:${deleteComment}">
      <tr>
        [[${deleteComment.number}]] [[${deleteComment.user}]] [[${deleteComment.userComment}]] [[${comment.date}]]
        [[${comment.good}]]
        <br>削除しました
      </tr>
    </div>
    </p>

    <p th:if="${errorMessage}">
      [[${errorMessage}]]
    </p>
  </tbody>

</body>

</html>
